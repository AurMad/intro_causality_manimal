<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.340">

  <meta name="author" content="Aurélien Madouasse">
  <meta name="dcterms.date" content="2023-11-08">
  <title>intro_causality_manimal - Introduction to causality in epidemiology</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Introduction to causality in epidemiology</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Aurélien Madouasse 
</div>
        <p class="quarto-title-affiliation">
            Oniris VetAgroBio
          </p>
    </div>
</div>

  <p class="date">2023-11-08</p>
</section>
<section id="teaching-material" class="slide level2">
<h2>Teaching material</h2>
<p>Link to the slides: <a href="https://aurmad.github.io/intro_causality_manimal/" class="uri">https://aurmad.github.io/intro_causality_manimal/</a></p>
<p>Link to the code and data: <a href="https://github.com/AurMad/intro_causality_manimal" class="uri">https://github.com/AurMad/intro_causality_manimal</a></p>
</section>
<section>
<section id="why-causality" class="title-slide slide level1 center">
<h1>Why causality ?</h1>
<p>… through an example</p>

<img data-src="figs/book_of_why.jpg" class="r-stretch"></section>
<section id="bovid-19" class="slide level2">
<h2>Bovid-19</h2>
<ul>
<li class="fragment">Bovid-19 is a (fictitious) viral disease of cows that very often results in death</li>
<li class="fragment">Two treatments are used to prevent death</li>
<li class="fragment">The effectiveness of these treatments is unknown</li>
<li class="fragment">The following dataset was collected from 1000 cows treated with either one or the other treatment</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000 × 4
   anim_id   age treat death_obs
     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
 1       1   5.5 A             0
 2       2   8.4 B             0
 3       3   8.9 A             1
 4       4   8.5 B             1
 5       5   7.2 B             0
 6       6   9.8 B             1
 7       7   7.2 A             0
 8       8   9.9 B             1
 9       9   7.3 B             0
10      10   9.7 B             0
# ℹ 990 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="effectiveness-of-treatments-a-and-b" class="slide level2">
<h2>Effectiveness of treatments A and B</h2>
<ul>
<li class="fragment">From the data collected we would like to evaluate the effectiveness of each treatment</li>
</ul>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-simple">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Exercise</strong></p>
</div>
<div class="callout-content">
<ul>
<li class="fragment">Open the file called <code>bovid19_1.xlsx</code> in the <code>data</code> folder</li>
<li class="fragment">Calculate the proportion of deaths for each treatment</li>
<li class="fragment">Which treatment is the most effective?</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="effectiveness-of-treatments-a-and-b-1" class="slide level2">
<h2>Effectiveness of treatments A and B</h2>
<ul>
<li class="fragment">You should have obtained the following table:</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Treatment</th>
<th style="text-align: right;">N Treated</th>
<th style="text-align: right;">N deaths</th>
<th style="text-align: right;">P deaths</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">370</td>
<td style="text-align: right;">145</td>
<td style="text-align: right;">0.392</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">266</td>
<td style="text-align: right;">0.422</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<ul>
<li class="fragment">What do you conclude?</li>
</ul>
</section>
<section id="effectiveness-of-treatments-according-to-age" class="slide level2">
<h2>Effectiveness of treatments according to age</h2>
<ul>
<li class="fragment">We suspect that the effectiveness of treatments may vary with age</li>
<li class="fragment">We repeat our calculation, taking into account the age of the cows</li>
</ul>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-simple">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Exercise</strong></p>
</div>
<div class="callout-content">
<ul>
<li class="fragment">In the <code>bovid19_1.xlsx</code> file</li>
<li class="fragment">Categorise each animal as being <span class="math inline">\(&lt; 5\)</span> or <span class="math inline">\(\geq 5\)</span> years of age</li>
<li class="fragment">Calculate the proportion of deaths for each treatment in each age category</li>
<li class="fragment">Which treatment is the most effective?</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="effectiveness-of-treatments-according-to-age-1" class="slide level2">
<h2>Effectiveness of treatments according to age</h2>
<ul>
<li class="fragment">You should have obtained the following table:</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Treatment</th>
<th style="text-align: left;">Age</th>
<th style="text-align: right;">N Treated</th>
<th style="text-align: right;">N deaths</th>
<th style="text-align: right;">P deaths</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: left;">&lt; 5</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0.043</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: left;">&lt; 5</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: left;">&gt; 5</td>
<td style="text-align: right;">277</td>
<td style="text-align: right;">141</td>
<td style="text-align: right;">0.509</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: left;">&gt; 5</td>
<td style="text-align: right;">604</td>
<td style="text-align: right;">266</td>
<td style="text-align: right;">0.440</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<ul>
<li class="fragment">What do you conclude?</li>
</ul>
</section>
<section id="simpsons-paradox" class="slide level2">
<h2>Simpson’s paradox</h2>
<div class="columns">
<div class="column" style="width:80%;">
<ul>
<li class="fragment"><p>Overall, the proportion of deaths is lower for treatment A</p></li>
<li class="fragment"><p>In both age groups, the proportions of deaths are lower for treatment B</p></li>
<li class="fragment"><p>This is known as <strong>Simpson’s paradox</strong></p></li>
</ul>
</div><div class="column" style="width:20%;">
<div class="fragment">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/Munch_Scream.jpg"></p>
</figure>
</div>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:30%;">
<div class="fragment">
<p><img data-src="figs/simpsons-paradox-1024x830.jpg"></p>
</div>
</div><div class="column" style="width:70%;">
<ul>
<li class="fragment">Left: example with 2 continuous variables <span class="math inline">\(\rightarrow\)</span> the direction of the association is reversed when you control for the character</li>
</ul>
</div>
</div>
<div style="font-size: 80%;">
<p>Image: <a href="https://analyticsindiamag.com/understanding-simpsons-paradox-and-its-impact-on-data-analytics/" class="uri">https://analyticsindiamag.com/understanding-simpsons-paradox-and-its-impact-on-data-analytics/</a></p>
</div>
</section>
<section id="why-causality-1" class="slide level2">
<h2>Why causality ?</h2>
<ul>
<li class="fragment">In order to improve health of individuals, and ultimately of populations, our objectives are to:
<ul>
<li class="fragment">implement preventive measures, which involves identifying the causes leading to disease</li>
<li class="fragment">provide effective curative treatments, which implies to quantify their causal impact on the course of disease</li>
</ul></li>
<li class="fragment">Studying associations can be misleading!</li>
<li class="fragment">We need specific concepts and tools to study causality.</li>
</ul>
</section></section>
<section>
<section id="early-attempts-in-medicine-epidemiology" class="title-slide slide level1 center">
<h1>Early attempts in medicine &amp; epidemiology</h1>

</section>
<section id="koch-postulates-1" class="slide level2">
<h2>Koch postulates (1)</h2>
<ul>
<li class="fragment">With the discovery of bacteria at the end of the XIX<span class="math inline">\(^{th}\)</span> century, the question arose as to whether a given bacterium was the cause of a given disease.</li>
<li class="fragment"><a href="https://en.wikipedia.org/wiki/Robert_Koch">Robert Koch</a> and <a href="https://en.wikipedia.org/wiki/Friedrich_Loeffler">Friedrich Loeffler</a> proposed a set of 4 postulates that had to be fulfilled by a bacterium in order to conclude that it is causing a disease.</li>
</ul>
</section>
<section id="koch-postulates-2" class="slide level2">
<h2>Koch postulates (2)</h2>
<ul>
<li class="fragment">The Koch postulates (from this <a href="https://en.wikipedia.org/wiki/Koch%27s_postulates">Wikipedia page</a>) are:
<ol type="1">
<li class="fragment">The microorganism must be found in abundance in all organisms suffering from the disease but should not be found in healthy organisms.</li>
<li class="fragment">The microorganism must be isolated from a diseased organism and grown in pure culture.</li>
<li class="fragment">The cultured microorganism should cause disease when introduced into a healthy organism.</li>
<li class="fragment">The microorganism must be re-isolated from the inoculated, diseased experimental host and identified as being identical to the original specific causative agent.</li>
</ol></li>
<li class="fragment">These postulates had limitations (asymptomatic carriers, organisms difficult to grow…) and only applied to infectious agents</li>
</ul>
</section>
<section id="bradford-hill-criteria-1" class="slide level2">
<h2>Bradford Hill criteria (1)</h2>
<ul>
<li class="fragment">In the first half of the XX<span class="math inline">\(^{th}\)</span> century, questions arose regarding the causes of the increase in the incidence of lung cancer</li>
<li class="fragment">In the 1950s, epidemiologists <a href="https://en.wikipedia.org/wiki/Austin_Bradford_Hill">Austin Bradford Hill</a> and <a href="https://en.wikipedia.org/wiki/Richard_Doll">Richard Doll</a> ran a series of studies to identify the causes of this increase</li>
<li class="fragment">They found a strong association between smoking habits and the probability of developing cancer</li>
<li class="fragment">The interpretation of their results that smoking causes cancer was challenged.</li>
<li class="fragment">In 1965, Bradford Hill proposed a set of 9 criteria to assess causal claims</li>
</ul>
</section>
<section id="bradford-hill-criteria-2" class="slide level2">
<h2>Bradford Hill criteria (2)</h2>
<ul>
<li class="fragment"><p>The 9 criteria (from <a href="https://en.wikipedia.org/wiki/Bradford_Hill_criteria">Wikipedia</a>):</p>
<ol type="1">
<li class="fragment"><strong>Strength</strong> (effect size): A small association does not mean that there is not a causal effect, though the larger the association, the more likely that it is causal.</li>
<li class="fragment"><strong>Consistency</strong> (reproducibility): Consistent findings observed by different persons in different places with different samples strengthens the likelihood of an effect.</li>
<li class="fragment"><strong>Specificity</strong>: Causation is likely if there is a very specific population at a specific site and disease with no other likely explanation. The more specific an association between a factor and an effect is, the bigger the probability of a causal relationship.</li>
<li class="fragment"><strong>Temporality</strong>: The effect has to occur after the cause (and if there is an expected delay between the cause and expected effect, then the effect must occur after that delay).</li>
</ol></li>
</ul>
</section>
<section id="bradford-hill-criteria-3" class="slide level2">
<h2>Bradford Hill criteria (3)</h2>
<ul>
<li class="fragment"><p>The 9 criteria (from <a href="https://en.wikipedia.org/wiki/Bradford_Hill_criteria">Wikipedia</a>):</p>
<ol start="5" type="1">
<li class="fragment"><strong>Biological gradient</strong> (dose–response relationship): Greater exposure should generally lead to greater incidence of the effect. However, in some cases, the mere presence of the factor can trigger the effect. In other cases, an inverse proportion is observed: greater exposure leads to lower incidence.</li>
<li class="fragment"><strong>Plausibility</strong>: A plausible mechanism between cause and effect is helpful (but Hill noted that knowledge of the mechanism is limited by current knowledge).</li>
<li class="fragment"><strong>Coherence</strong>: Coherence between epidemiological and laboratory findings increases the likelihood of an effect. However, Hill noted that “lack of such evidence cannot nullify the epidemiological effect on associations”.</li>
<li class="fragment"><strong>Experiment</strong>: “Occasionally it is possible to appeal to experimental evidence”.</li>
<li class="fragment"><strong>Analogy</strong>: The use of analogies or similarities between the observed association and any other associations.</li>
</ol></li>
</ul>
</section></section>
<section>
<section id="current-concepts-and-approaches" class="title-slide slide level1 center">
<h1>Current concepts and approaches</h1>

</section>
<section id="problem-and-notation" class="slide level2">
<h2>Problem and notation</h2>
<ul>
<li class="fragment">Assume a disease and a treatment <span class="math inline">\(A\)</span>. We write:
<ul>
<li class="fragment"><span class="math inline">\(A = 0\)</span> for individuals who did not receive the treatment</li>
<li class="fragment"><span class="math inline">\(A = 1\)</span> for individuals who received the treatment</li>
</ul></li>
<li class="fragment">After receiving the treatment, two things can happen:
<ul>
<li class="fragment"><span class="math inline">\(Y = 0\)</span> for individuals who survive</li>
<li class="fragment"><span class="math inline">\(Y = 1\)</span> for individuals who die</li>
</ul></li>
<li class="fragment">What would it mean to say that treatment <span class="math inline">\(A\)</span> has a causal effect on preventing death in individual <span class="math inline">\(i\)</span>?</li>
</ul>
</section>
<section id="individual-treatment-effect" class="slide level2">
<h2>Individual treatment effect</h2>
<ul>
<li class="fragment">We define for individual <span class="math inline">\(i\)</span> :
<ul>
<li class="fragment"><span class="math inline">\(Y_i^{A = 1}\)</span> the outcome of receiving treatment <span class="math inline">\(A\)</span></li>
<li class="fragment"><span class="math inline">\(Y_i^{A = 0}\)</span> the outcome of NOT receiving treatment <span class="math inline">\(A\)</span></li>
</ul></li>
<li class="fragment">If treatment <span class="math inline">\(A\)</span> has a causal effect on the outcome of interest, then :</li>
</ul>
<div class="fragment">
<p><span class="math display">\[Y_i^{A=1} \neq  Y_i^{A=0}\]</span></p>
</div>
<ul>
<li class="fragment"><p>The difference <span class="math inline">\(Y_i^{A=1} - Y_i^{A=0}\)</span> is a measure of the <strong>individual treatment effect</strong></p></li>
<li class="fragment"><p>The <strong>fundamental problem of causal inference</strong> is that only one of the <em>potential outcomes</em> can be observed <span class="math inline">\(\rightarrow\)</span> it is impossible to estimate <span class="math inline">\(Y_i^{A=1} - Y_i^{A=0}\)</span></p></li>
</ul>
</section>
<section id="individual-treatment-effect-1" class="slide level2">
<h2>Individual treatment effect</h2>
<ul>
<li class="fragment">In the dataset below, we assume that we have observed the outcomes under both treatments</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  anim_id   age treat death_if_A death_if_B death_obs
    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;int&gt;      &lt;int&gt;     &lt;dbl&gt;
1       1   5.5 A              0          0         0
2       2   8.4 B              1          0         0
3       3   8.9 A              1          1         1
4       4   8.5 B              1          1         1
5       5   7.2 B              1          0         0
6       6   9.8 B              1          1         1</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-simple">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Exercise</strong></p>
</div>
<div class="callout-content">
<ul>
<li class="fragment">Open the file called <code>bovid19_2.xlsx</code> in the <code>data</code> folder</li>
<li class="fragment">Calculate the individual treatment effect for each animal</li>
<li class="fragment">Calculate the mean of the individual treatment effects</li>
<li class="fragment">What do you conclude?</li>
<li class="fragment">In a real situation, what data could you have?</li>
<li class="fragment">How would it change your conclusions?</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="potential-outcome-framework" class="slide level2">
<h2>Potential outcome framework</h2>
<ul>
<li class="fragment">The framework we use to conceptualise causality is called the <strong>potential outcome</strong> framework :
<ul>
<li class="fragment">There is one potential outcome for each treatment modality</li>
<li class="fragment">Only one of these treatment modalities can be observed in a given individual</li>
<li class="fragment">This leads to the <strong>fundamental problem of causal inference</strong> : it is impossible to quantify the treatment effect in an individual</li>
</ul></li>
</ul>
<div class="fragment">
<div class="cell">
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: right;"><span class="math inline">\(i\)</span></th>
<th style="text-align: left;">Treatment</th>
<th style="text-align: left;"><span class="math inline">\(Y^{a=0}\)</span></th>
<th style="text-align: left;"><span class="math inline">\(Y^{a=1}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">A = 0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">?</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">A = 1</td>
<td style="text-align: left;">?</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">A = 0</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">?</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">A = 1</td>
<td style="text-align: left;">?</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">A = 1</td>
<td style="text-align: left;">?</td>
<td style="text-align: left;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="average-treatment-effect-definition" class="slide level2">
<h2>Average treatment effect: definition</h2>
<ul>
<li class="fragment"><p>If we can’t quantify the treatment effect in a single individual, <em>maybe</em> we can do it for a group of individuals</p></li>
<li class="fragment"><p>The <strong>A</strong>verage <strong>T</strong>reatment <strong>E</strong>ffect is defined as:</p></li>
</ul>
<div class="fragment">
<p><span class="math display">\[ATE = E[Y_i^{A=1} - Y_i^{A=0}]\]</span></p>
</div>
<ul>
<li class="fragment"><p>where <span class="math inline">\(E[.]\)</span> is an expectation (i.e.&nbsp;an <em>average</em>) in the group of interest.</p></li>
<li class="fragment"><p>We assume that:</p></li>
</ul>
<div class="fragment">
<p><span class="math display">\[ATE = E[Y_i^{A=1} - Y_i^{A=0}] = E[Y_i^{A=1}] - E[Y_i^{A=0}]\]</span></p>
</div>
</section>
<section id="factual-and-counterfactual-outcomes" class="slide level2">
<h2>Factual and counterfactual outcomes</h2>
<ul>
<li class="fragment">In the data we have:
<ul>
<li class="fragment"><p><span class="math inline">\(Y_i|A_i=0\)</span>: the value of <span class="math inline">\(Y\)</span> in individuals who did not receive the treatment<br>
</p></li>
<li class="fragment"><p><span class="math inline">\(Y_i|A_i=1\)</span>: the value of <span class="math inline">\(Y\)</span> in individuals who received the treatment</p>
<ul>
<li class="fragment">In probability notation <span class="math inline">\(A|B\)</span> reads <span class="math inline">\(A\)</span> given <span class="math inline">\(B\)</span></li>
</ul></li>
</ul></li>
<li class="fragment"><strong>Factual outcome:</strong>
<ul>
<li class="fragment"><span class="math inline">\(Y^{A=0}_i|A_i=0\)</span> and <span class="math inline">\(Y^{A=1}_i|A_i=1\)</span> are <em>factual outcomes</em> <span class="math inline">\(\rightarrow\)</span> the potential outcome was the one observed</li>
</ul></li>
<li class="fragment"><strong>Counterfactual outcome:</strong>
<ul>
<li class="fragment"><span class="math inline">\(Y^{A=1}_i|A_i=0\)</span> and <span class="math inline">\(Y^{A=0}_i|A_i=1\)</span> are <em>counterfactual outcomes</em> <span class="math inline">\(\rightarrow\)</span> the potential outcome was not the one observed</li>
</ul></li>
</ul>
</section>
<section id="estimating-an-average-treatment-effect" class="slide level2">
<h2>Estimating an average treatment effect</h2>
<ul>
<li class="fragment">We could estimate the ATE by calculating :</li>
</ul>
<div class="fragment">
<p><span class="math display">\[E[Y|A=1] - E[Y|A=0]\]</span></p>
</div>
<ul>
<li class="fragment"><p>where the symbol <span class="math inline">\(|\)</span> means <em>given that</em></p></li>
<li class="fragment"><p>the equation reads as follows: <em>the expectation of</em> <span class="math inline">\(Y\)</span> given that (<span class="math inline">\(|\)</span>) the animals received the treatment (<span class="math inline">\(A=1)\)</span> minus the expectation of <span class="math inline">\(Y\)</span> given that the animals did NOT receive the treatment (<span class="math inline">\(A=0)\)</span></p></li>
<li class="fragment"><p>this can be calculated by subtracting the proportion of individuals that survived in the untreated from the proportion of individuals that survived in the treated</p></li>
</ul>
</section>
<section id="estimating-an-average-treatment-effect-1" class="slide level2">
<h2>Estimating an average treatment effect</h2>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-simple">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Exercise</strong></p>
</div>
<div class="callout-content">
<ul>
<li class="fragment">In the file <code>bovid19_2.xlsx</code></li>
<li class="fragment">Calculate <span class="math inline">\(E[Y|A=1] - E[Y|A=0]\)</span></li>
<li class="fragment">Compare what you obtain to the average of individual treatment effects calculated earlier</li>
<li class="fragment">Are the results different?</li>
<li class="fragment">Why?</li>
</ul>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="representing-causality-with-dags" class="title-slide slide level1 center">
<h1>Representing causality with DAGs</h1>

<img data-src="intro_causality_manimal_files/figure-revealjs/dag-simple-1.png" width="960" class="r-stretch"></section>
<section id="representing-causality-with-dags-1" class="slide level2">
<h2>Representing causality with DAGs</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li class="fragment">On the right is a representation of the causal relationships between age (<span class="math inline">\(X\)</span>), treatment (<span class="math inline">\(A\)</span>) and death (<span class="math inline">\(Y\)</span>)</li>
<li class="fragment">This type of representation is called a <strong>D</strong>irected <strong>A</strong>cyclic <strong>G</strong>raph (<strong>DAG</strong>)</li>
<li class="fragment">Each variable (<span class="math inline">\(X\)</span>, <span class="math inline">\(A\)</span>, <span class="math inline">\(Y\)</span>) is called a <strong>node</strong></li>
<li class="fragment">Nodes can be connected with <strong>edges</strong></li>
</ul>
</div><div class="column" style="width:40%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="intro_causality_manimal_files/figure-revealjs/dag-bovid19-1.png" width="288"></p>
</div>
</div>
</div>
</div>
<ul>
<li class="fragment">The edges have a direction (<em>directed</em>)</li>
<li class="fragment">Following directed edges, no path connects a node to itself (<em>acyclic</em>)</li>
<li class="fragment">DAGs can be used to represent causality: <strong>causal graphs</strong></li>
</ul>
</section>
<section id="causality-in-dags" class="slide level2">
<h2>Causality in DAGs</h2>
<ul>
<li class="fragment">In a causal DAG, causality is represented by a directed edge
<ul>
<li class="fragment">X causes Y</li>
</ul></li>
</ul>
<div class="fragment">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="intro_causality_manimal_files/figure-revealjs/dag-cause-1.png" width="288"></p>
</div>
</div>
</div>
</section>
<section id="dags-building-blocks" class="slide level2">
<h2>DAGs’ building blocks</h2>
<ul>
<li class="fragment">DAGs are made of 3 types of basic building blocks</li>
</ul>
<div class="fragment">
<div class="columns">
<div class="column" style="width:33.3%;">
<center>
<strong>Chain</strong>
</center>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="intro_causality_manimal_files/figure-revealjs/dag-chain-1.png" width="384"></p>
</div>
</div>
</div><div class="column" style="width:33.3%;">
<center>
<strong>Fork</strong>
</center>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="intro_causality_manimal_files/figure-revealjs/dag-fork-1.png" width="384"></p>
</div>
</div>
</div><div class="column" style="width:33.3%;">
<center>
<strong>Collider</strong>
</center>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="intro_causality_manimal_files/figure-revealjs/dag-collider-1.png" width="384"></p>
</div>
</div>
</div>
</div>
</div>
<ul>
<li class="fragment">These structures are important to identify for study design and causal inference</li>
</ul>
</section></section>
<section>
<section id="confounders" class="title-slide slide level1 center">
<h1>Confounders</h1>

<img data-src="https://imgs.xkcd.com/comics/cell_phones.png" class="r-stretch"></section>
<section id="back-to-bovid-19" class="slide level2">
<h2>Back to <em>Bovid-19</em></h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li class="fragment">In epidemiological terms
<ul>
<li class="fragment"><span class="math inline">\(Y\)</span> (<em>death</em>) is the <strong>outcome</strong> of interest</li>
<li class="fragment"><span class="math inline">\(A\)</span> (<em>treatment</em>) is the <strong>exposure</strong> of interest</li>
<li class="fragment"><span class="math inline">\(X\)</span> (<em>age</em>) is a <strong>confounder</strong> <span class="math inline">\(\rightarrow\)</span> <span class="math inline">\(X\)</span> has a causal effect on both the outcome and the exposure.</li>
</ul></li>
<li class="fragment">In other words, <em>age</em> is a confounder because it is both a prognostic factor and is used to determine treatment allocation.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="intro_causality_manimal_files/figure-revealjs/dag-bovid19 show-1.png" width="384"></p>
</div>
</div>
</div>
</div>
<ul>
<li class="fragment">In causal language:
<ul>
<li class="fragment"><span class="math inline">\(E(Y_i^{A=1}|A_i=0) \neq E(Y_i^{A=1}|A_i=1)\)</span> and</li>
<li class="fragment"><span class="math inline">\(E(Y_i^{A=0}|A_i=0) \neq E(Y_i^{A=0}|A_i=1)\)</span></li>
</ul></li>
</ul>
</section>
<section id="exchangeability" class="slide level2">
<h2>Exchangeability</h2>
<ul>
<li class="fragment"><p>If we want to be able to make valid causal inference, we need to ensure that:</p>
<ul>
<li class="fragment"><span class="math inline">\(E(Y_i^{A=1}|A_i=0) = E(Y_i^{A=1}|A_i=1)\)</span> and</li>
<li class="fragment"><span class="math inline">\(E(Y_i^{A=0}|A_i=0) = E(Y_i^{A=0}|A_i=1)\)</span></li>
</ul></li>
<li class="fragment"><p>This can also be phrased as: treatment allocation needs to be conditionally independent of the outcome</p>
<ul>
<li class="fragment"><span class="math inline">\(Y_i^{A} \perp\!\!\!\perp A_i\)</span></li>
</ul></li>
<li class="fragment"><p>This is called <strong>exchangeability</strong></p></li>
<li class="fragment"><p>Can you propose a strategy for obtaining exchangeability?</p></li>
</ul>
</section></section>
<section>
<section id="randomisation" class="title-slide slide level1 center">
<h1>Randomisation</h1>
<img data-src="https://media.tenor.com/haQX6E1pQzYAAAAC/two-face-cruel.gif" class="r-stretch">
</section>
<section id="randomised-experiments" class="slide level2">
<h2>Randomised experiments</h2>
<ul>
<li class="fragment">Randomisation is the best way to make data exchangeable</li>
<li class="fragment">Principle: use chance to allocate the different treatments being compared (including placebo)
<ul>
<li class="fragment">This leads to <span class="math inline">\(A_i \perp\!\!\!\perp X_i\)</span> and therefore <span class="math inline">\(Y_i^{A} \perp\!\!\!\perp A_i\)</span></li>
</ul></li>
</ul>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="intro_causality_manimal_files/figure-revealjs/dag-bovid19-random-1.png" width="384"></p>
</figure>
</div>
</div>
</div>
</div>
<ul>
<li class="fragment">This is the basis for randomised controlled trials used to evaluate treatment efficacy</li>
</ul>
</section>
<section id="randomised-experiments---exercise" class="slide level2">
<h2>Randomised experiments - exercise</h2>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-simple">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Exercise</strong></p>
</div>
<div class="callout-content">
<ul>
<li class="fragment">In the file <code>bovid19_2.xlsx</code></li>
<li class="fragment">Propose/try an approach to randomly allocate treatment</li>
<li class="fragment">From the randomly allocated treatments, calculate an ATE</li>
<li class="fragment">Is your estimation better than the one obtained from the observed data?</li>
</ul>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="observational-studies" class="title-slide slide level1 center">
<h1>Observational studies</h1>

<img data-src="https://api.time.com/wp-content/uploads/2015/01/north-korea-kim-jong-un.jpg" class="r-stretch"></section>
<section id="observational-studies-motivation-definition-and-challenges." class="slide level2">
<h2>Observational studies: motivation, definition and challenges.</h2>
<ul>
<li class="fragment">It is not always possible to conduct randomised experiments
<ul>
<li class="fragment">e.g.&nbsp;not ethical to randomly allocate people to smoking/non smoking</li>
</ul></li>
<li class="fragment">Non experimental data used to make causal inference
<ul>
<li class="fragment">e.g.&nbsp;Bovid-19 data</li>
</ul></li>
<li class="fragment"><strong>Observational study</strong>: study in which the exposure(s) is not determined by the researchers</li>
<li class="fragment">Causal inference from observational data is hard and carries potential sources of bias</li>
<li class="fragment">Methods have been developed to mitigate the risk of bias in such studies</li>
<li class="fragment">Most methods rely on the prior construction of DAGs from the scientific literature or expert opinion</li>
</ul>
</section>
<section id="matching-to-address-confounding" class="slide level2">
<h2>Matching to address confounding</h2>
<ul>
<li class="fragment">Aim: make exposure (treatment) conditionally independent from outcome <span class="math inline">\(\rightarrow Y_i^{A=a} \perp\!\!\!\perp A_i | X_i\)</span></li>
<li class="fragment">Principle:
<ul>
<li class="fragment">match every treated individual with an untreated individual with the same characteristics</li>
<li class="fragment">model/compare the expected values of the outcome in treated and untreated of the matched sample</li>
</ul></li>
</ul>
</section>
<section id="inverse-probability-weighting-ipw-to-address-confounding" class="slide level2">
<h2>Inverse probability weighting (<strong>IPW</strong>) to address confounding</h2>
<ul>
<li class="fragment">Aim: make exposure (treatment) conditionally independent from outcome <span class="math inline">\(\rightarrow Y_i^{A=a} \perp\!\!\!\perp A_i | X_i\)</span></li>
<li class="fragment">Principle:
<ul>
<li class="fragment">weight each observation by the inverse of its probability of exposure (treatment)</li>
<li class="fragment">model/compare the expected value of the outcome using the weighted observations</li>
</ul></li>
</ul>
</section>
<section id="propensity-scores-for-matching-and-ipw" class="slide level2">
<h2>Propensity scores for matching and IPW</h2>
<ul>
<li class="fragment">Propensity scores are individual probabilities of exposure (treatment) predicted from models</li>
<li class="fragment">Consider the following DAG:</li>
</ul>
<div class="columns">
<div class="column" style="width:40%;">
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="intro_causality_manimal_files/figure-revealjs/dag-bovid19-propensity-1.png" width="384"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:60%;">
<ul>
<li class="fragment">We can use logistic regression to model the probability of treatment:
<ul>
<li class="fragment"><span class="math inline">\(ln(\frac{p(A_i)}{1 - p(A_i)}) = \beta_0 + \beta_1 X1_i + \beta_2 X2_i\)</span></li>
<li class="fragment">then <span class="math inline">\(p(A_i)\)</span> can be predicted for each <span class="math inline">\(i\)</span> from the observed <span class="math inline">\(X1_i\)</span> and <span class="math inline">\(X2_i\)</span></li>
</ul></li>
<li class="fragment">Models other than logistic regression can also be used</li>
</ul>
</div>
</div>
</section>
<section id="mediation-analysis-1" class="slide level2">
<h2>Mediation analysis (1)</h2>
<ul>
<li class="fragment">Consider the following DAG:</li>
</ul>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="intro_causality_manimal_files/figure-revealjs/dag-bovid19-mediator-1.png" width="384"></p>
</figure>
</div>
</div>
</div>
</div>
<ul>
<li class="fragment">If we are interested in the causal effect of <span class="math inline">\(A\)</span> on <span class="math inline">\(Y\)</span>, we do not have to care about <span class="math inline">\(X\)</span>
<ul>
<li class="fragment">The path from <span class="math inline">\(X\)</span> to <span class="math inline">\(Y\)</span> is <em>blocked</em> by <span class="math inline">\(A\)</span></li>
</ul></li>
</ul>
</section>
<section id="mediation-analysis-2" class="slide level2">
<h2>Mediation analysis (2)</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="intro_causality_manimal_files/figure-revealjs/dag-bovid19-mediator1-1.png" width="384"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:60%;">
<ul>
<li class="fragment">Consider the DAG on the left</li>
<li class="fragment">If we are interested in the causal effect of <span class="math inline">\(A\)</span> on <span class="math inline">\(Y\)</span>, we can:
<ul>
<li class="fragment">Look at the total effect of <span class="math inline">\(A\)</span> on <span class="math inline">\(Y\)</span> by modelling <span class="math inline">\(Y\)</span> as a function of <span class="math inline">\(A\)</span> only</li>
<li class="fragment">Break down the effect of <span class="math inline">\(A\)</span> on <span class="math inline">\(Y\)</span> into a direct effect and an effect of <span class="math inline">\(A\)</span> mediated through <span class="math inline">\(X\)</span></li>
</ul></li>
</ul>
</div>
</div>
<ul>
<li class="fragment">This is called mediation analysis</li>
</ul>
</section>
<section id="collider-bias" class="slide level2">
<h2>Collider bias</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="intro_causality_manimal_files/figure-revealjs/dag-bovid19-collider-1.png" width="384"></p>
</figure>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:60%;">
<ul>
<li class="fragment">Consider the DAG on the left</li>
<li class="fragment">If we are interested in the causal effect of <span class="math inline">\(A\)</span> on <span class="math inline">\(Y\)</span>, we should not include <span class="math inline">\(X\)</span> in our analysis
<ul>
<li class="fragment"><span class="math inline">\(X\)</span> is a collider</li>
<li class="fragment">Including a collider in an analysis will result in a spurious correlation between <span class="math inline">\(A\)</span> and <span class="math inline">\(Y\)</span></li>
</ul></li>
</ul>
</div>
</div>
</section></section>
<section>
<section id="dagitty" class="title-slide slide level1 center">
<h1>Dagitty</h1>

<img data-src="figs/Dagitty.png" class="r-stretch"></section>
<section id="dagitty-1" class="slide level2">
<h2>Dagitty</h2>
<ul>
<li class="fragment">Dagitty is a tool <em>for creating, editing, and analyzing causal diagrams</em>
<ul>
<li class="fragment">Available as a website (<a href="https://www.dagitty.net/" class="uri">https://www.dagitty.net/</a>) and an R package</li>
</ul></li>
</ul>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-simple">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Exercise</strong></p>
</div>
<div class="callout-content">
<ul>
<li class="fragment">Use the Dagitty website to create a DAG for a phenomenon of your choice</li>
<li class="fragment">What data should you collect?</li>
<li class="fragment">How would you analyse your data?</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="take-home-messages" class="slide level2">
<h2>Take home messages</h2>
<ul>
<li class="fragment">Identifying causal relationships from observational data is hard</li>
<li class="fragment">This requires the formulation of hypotheses based on scientific literature or expert opinion.</li>
<li class="fragment">These hypotheses should be structured into a DAG</li>
<li class="fragment">The DAG should guide data collection and analysis</li>
<li class="fragment">A limited number of rules exist to identify the variables (not) to include in the analysis and how to interpret the results</li>
</ul>


<img src="figs/LOGO ONIRIS VetAgroBio RVB_grand.png" class="slide-logo r-stretch"><div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>